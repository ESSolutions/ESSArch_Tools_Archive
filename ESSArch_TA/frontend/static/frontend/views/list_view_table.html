<div st-table="vm.displayedIps" st-pipe="vm.callServer">
    <div class="title-action-button-row">
        <div class="title">
            <h4>
                {{'INFORMATION_PACKAGES' | translate}}
            </h4>
        </div>
    </div>
    <div class="search-prepare-wrapper">
        <label for items-per-page></label>
        <select tabindex="-1" id="items-per-page" style="margin-right: 10px;" ng-change="updateIpsPerPage(vm.itemsPerPage)" class="form-control items-per-page" ng-model="vm.itemsPerPage" ng-options="x for x in [5,10,20,25,50]" uib-popover="{{'ITEMSPERPAGE' | translate}}" popover-placement="top-left" popover-popup-delay="500" popover-append-to-body="true"></select>
        <span ng-if="!('home.reception' | isState)" class="fas fa-md fa-filter filter-icon" ng-class="{'blue-border': showAdvancedFilters, 'filter-active': filterActive()}" ng-click="toggleAdvancedFilters()"></span>
        <div ng-if="!('home.reception' | isState)" ng-show="showAdvancedFilters" class="advanced-filters">
            <label>
                <input type="checkbox" ng-model="filterOwnIps" ng-change="vm.toggleOwnIps(filterOwnIps)">
                {{'SEE_MY_IPS' | translate}}
            </label>
            <form name="form1" style="position: relative;" novalidate>
                <div class="formly-buttons-wrapper">
                    <formly-form model="filterModel" fields="fields" options="options">
                    </formly-form>
                </div>
            </form>
            <button class="btn btn-default" style="float: right;margin-top: 5px;" ng-click="submitAdvancedFilters()">{{'APPLY' | translate}}</button>
        </div>
        <div ng-if="!('home.reception' | isState)" class="global-search">
        <input id="search-input" st-search="" class="form-control" ng-attr-placeholder="{{'GLOBALSEARCH' | translate}}" type="text"
            uib-popover="{{'GLOBALSEARCHDESC_IP' | translate}}" popover-placement="top-left" popover-popup-delay="500" popover-append-to-body="true"
        />
        </div>
        <button ng-if="!('home.reception' | isState)" type="button" ng-click="getListviewData()" class="btn btn-primary btn-small" style="margin-left: 5px;" uib-popover="{{'SEARCH' | translate}}"  popover-placement="top-left" popover-popup-delay="500" popover-append-to-body="true">{{'SEARCH' | translate}}&nbsp;<i class="fas fa-search"></i></button>
        <div class="refresh-icon">
            <span ng-click="getListViewData()" class="clickable angular-animate fas fa-sync-alt fa-lg"
                ng-class="{'fa-sync-alt-animate': ipLoading }" uib-popover="{{'REFRESHTABLEDESC' | translate}}" popover-placement="left"
                popover-popup-delay="500" popover-append-to-body="true"></span>
        </div>
    </div>
    <div id="list-view" tabindex="0" ng-keydown="vm.ipListKeydownListener($event)" class="list-view-table">
        <table class="table table-striped" style="margin-bottom: 0px;">
            <a ng-if="(ips.length || ip !== null)" ng-click="vm.deselectAll()" translate="CLEAR_ALL"></a>
            <a ng-if="ips.length == 0 && ip === null && vm.displayedIps.length > 0" ng-click="vm.selectAll()" translate="SELECT_ALL"></a>
            <thead>
                <tr>
                    <th class="clickable" class="column-label" st-sort="{{col.sortString}}"
                    st-sort-default="{{col.sortString == 'create_date'? 'reverse' : ''}}" ng-repeat="col in listViewColumns"
                    uib-popover="{{col.label.toUpperCase()+'_DESC' | translate}}" popover-placement="top-left" popover-popup-delay="500" popover-append-to-body="true">
                        <span ng-hide="col.label=='step_state'">
                            {{col.label.toUpperCase() | translate}}
                        </span>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-class="{'selected': ip.object_identifier_value == row.object_identifier_value || selectedAmongOthers(row.id)}" ng-repeat="row in vm.displayedIps" class="table-item">
                    <td ng-repeat="col in listViewColumns">
                        <div ng-include src="col.template"></div>
                    </td>
                </tr>
                <tr ng-if="!vm.displayedIps.length && !ipLoading" class="empty-table-indicator">
                    <td colspan="{{listViewColumns.length+1}}">{{'NO_RESULTS_FOUND' | translate}}</td>
                </tr>
                <tr ng-if="!vm.displayedIps.length && ipLoading" class="empty-table-indicator">
                    <td class="loading-column" colspan="{{listViewColumns.length+1}}">{{'LOADING' | translate}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <td ng-show="!initLoad" colspan="{{listViewColumns.length}}">
        <div class="text-center" st-template="static/frontend/views/pagination.html" st-pagination="" st-items-by-page="vm.itemsPerPage" st-displayed-pages="7"></div>
    </td>
</div>
